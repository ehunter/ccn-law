!function($){jQuery.fn.CTCTHide=function(speed){"undefined"==typeof speed&&(speed="fast"),this.fadeOut(speed,function(){$(this).addClass("idx-closed")})},jQuery.fn.CTCTShow=function(speed){"undefined"==typeof speed&&(speed="fast"),this.fadeIn(speed,function(){$(this).removeClass("idx-closed")})}}(jQuery),jQuery(document).ready(function($){function ctct_select_text(e){return e.preventDefault(),$(this).focus().select(),!1}function ctct_pointers(target){"undefined"!=typeof CTCT&&CTCT&&CTCT.pointers&&CTCT.pointers.pointers&&CTCT.pointers.pointers.forEach(function(pointer,index,array){ctct_pointer(pointer)})}function ctct_pointer(pointer){hide_pointers=$.cookie("ctct_hide_pointers"),hide_pointers_array=hide_pointers?hide_pointers.split(/,/):[],$.inArray(pointer.pointer_id,hide_pointers_array)>=0||(options=$.extend(pointer.options,{close:function(event){hide_pointers_array.push(pointer.pointer_id),$.cookie("ctct_hide_pointers",hide_pointers_array.join(",")),$.post(ajaxurl,{pointer:pointer.pointer_id,action:"dismiss-wp-pointer"})}}),$(pointer.target).data("pointer_id",pointer.pointer_id).pointer(options),$(pointer.target).is(":visible")?$(pointer.target).pointer("open"):$(pointer.target).pointer("destroy"))}function ctct_set_referrer(){var $referrer=$("input[name=_wp_http_referer]",".toplevel_page_constant-contact-api");$referrer.length&&$referrer.val($referrer.val().replace(/(#.+)$/gi,"")+document.location.hash)}function ctct_ajax(data,$object){var id="undefined"!=typeof CTCT&&CTCT.id?CTCT.id:$object.data("id"),field=$object.data("name")?$object.data("name"):data.field,parent=$object.data("parent")?$object.data("parent"):data.parent,result=$.Deferred();return $.ajax({url:ajaxurl,method:"POST",async:!0,isLocal:!0,timeout:15e3,data:{action:"ctct_ajax",_wpnonce:CTCT._wpnonce,value:data.value,id:id,component:CTCT.component,field:field,parent:parent}}).done(function(data,textStatus,jqXHR){var message=CTCT.text.request_nothing_changed;if("nocontent"!==textStatus){var responseText=$.parseJSON(data);message=responseText.message}alertify.log(message),result.resolve(!0)}).fail(function(data,textStatus,jqXHR){var responseText=$.parseJSON(data.responseText),error_template="<h3>{heading}</h3><p>{error_message}</p>",message="string"==typeof responseText.message?responseText.message:responseText.message[0].error_message.replace(/^.*?:/gi,""),request_error=CTCT.text.request_error.replace("{code}",responseText.code).replace("{message}",message);error_template=error_template.replace("{heading}",CTCT.text.request_failed_heading).replace("{error_message}",request_error),alertify.alert(error_template).set("basic",!0),result.resolve(!1)}),result.promise()}function CTCTToggleVisibility($that,event){var speed="fast";if("object"!=typeof event||"save-widget"!==event.type&&"ctct_ready"!==event.type||(speed=0),$that.attr("rel")&&""!==$that.attr("rel")){var rel=$that.attr("rel"),type=$that.parents(".form-table").length?"tr":"div.ctct_setting",checked=$that.is(":checked"),visible=$that.is(":visible"),$row=$(".toggle_"+rel);checked&&visible||checked&&$that.parents(".widget").length>0?"radio"===$that.attr("type")?$(".constant-contact-api-toggle",$that.parents(type)).each(function(){var $thisrel=$(".toggle_"+$(this).attr("rel")),$thisrelparents=$thisrel.parents(type).removeClass("ctct-closed");"false"!==$(this).attr("rel")&&$thisrel.not(".toggle_"+rel).parents(type).hide().addClass("ctct-closed"),$thisrelparents.not(".ctct-closed").CTCTShow(speed)}):($that.attr("rel",!1),$row.each(function(){var show=($(this),!0),matches=$(this).attr("class").match(/(toggle_.*?\b)+/gi);matches&&!$("body").hasClass("widgets-php")&&$.each(matches,function(k,v){var $input=$("input[rel="+v.replace("toggle_","")+"]");$input.length>0&&!$input.attr("checked")&&(show=!1)}),show===!0&&$(this).parents(type).CTCTShow(speed)})):$row.each(function(){$(this).parents(type).CTCTHide(speed)}),$that.attr("rel",rel)}}$("body").on("click",".kwslog-toggle",function(e){return $(".data",$(this).parents(".kwslog-debug")).toggle(),!1}),$(".ctct_table input[readonly], input[readonly].select-text").on("click",ctct_select_text),$("body").on("click",'a[rel="wp-help"]',function(){return $("#screen-meta").is(":hidden")&&$("#contextual-help-link").click(),$('#screen-meta a[href*="'+$(this).attr("href").replace("#","")+'"]').click(),!1}),$("#wpbody").css("padding-bottom",$("#wpfooter").height()),$("a[rel~=external]").attr("target","_blank"),$(".tablink").click(function(e){return e.preventDefault(),$($(this).attr("href")+"-link").click(),!1}),$(".confirm").click(function(){var confirm1=confirm($(this).data("confirm")),confirm2=$(this).data("confirm-again");return!!confirm1&&(!confirm2||confirm(confirm2))}),$("#constant-contact_page_constant-contact-forms").ready(function(){ctct_pointers()}),$("#ctct-settings-tabs").tabs({show:!1,create:function(event,ui){ctct_pointers(),ctct_set_referrer()},activate:function(event,ui){ctct_pointers(),$(this).addClass("size-"+$(".ui-tabs-nav",$(this)).length),event.preventDefault();var fx,hash=$("a",ui.newTab).attr("href").replace(/^#/,""),node=$("#"+hash);return node.length&&(node.attr("id",""),fx=$("<div></div>").css({position:"absolute",visibility:"hidden",top:$(document).scrollTop()+"px"}).attr("id",hash).prependTo($("body"))),document.location.hash=hash,node.length&&(fx.remove(),node.attr("id",hash)),ctct_set_referrer(),!1},cookie:{expires:1}}),$(".inline-edit-update").on("click submit",function(){$(this).parent("span").addClass("submitting-in-progress")}),$(".editable").attr("title",CTCT.text.editable).inlineEdit({buttons:'<button class="save button button-primary inline-edit-update">Update</button> <button class="cancel button button-secondary">Cancel</button>',cancelOnBlur:!0,placeholder:CTCT.text.editable,editInProgress:"edit-in-progress",save:function(event,data,widget){var $that=$(this);$that.removeClass("edit-in-progress").addClass("saving-in-progress"),ctct_ajax(data,$that).done(function(success){$that.removeClass("saving-in-progress"),success?$that.effect("highlight",{color:"#e99e23"},3e3):$that.effect("highlight",{color:"red"},3e3)})}}),$(".constant-contact_page_constant-contact-contacts .ctct-lists").on("change",function(){if(0!==$(".edit-new-h2").length){var data={value:$("input",$(this)).serializeArray(),field:"lists"};ctct_ajax(data,$(this))}}),$(".cc_tip,.ctct_tip").each(function(){$(this).tooltip({content:function(){return $(this).prop("title")}})}),$(document).on("ready",function(e){$(".constant-contact-api-toggle[rel][type=radio]").filter(":checked").trigger("ctct_ready")}),$(".constant-contact-api-toggle[rel]").on("click ready ctct_ready save",function(e){CTCTToggleVisibility($(this),e)})});